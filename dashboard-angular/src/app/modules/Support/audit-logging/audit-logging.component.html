<!-- Page filter CARD -->
<div class="card">
  <!-- HEADER -->
  <div class="card-header">
    <div class="row">
      <!-- TOP TITLE -->
      <div class="col col-md-6">
        <!-- CARD TITLE -->
        <h5 class="card-title">
          {{ '::AuditLogsList' | abpLocalization }}
        </h5>
      </div>
    </div>
  </div>

  <div class="card-body">
    <!-- SEARCH PAGE  -->
    <div class="col col-md-12">
      <!-- FORM -->
      <form (submit)="Search()">
        <!-- INPUTE SEARCH -->
        <div class="input-group">
          <input class="form-control" [placeholder]="'::Search'| abpLocalization" name="queryFilter.search" [(ngModel)]="queryFilter.search"
            autocomplete="off" (keyup)="Search()" > 
          <button type="submit" class="btn btn-primary">
            <i class="fa fa-search" aria-hidden="true"></i>
          </button>
        </div>
      </form>

    </div>

    <!-- Filters -->
    <div class="col col-md-12 mt-3">

      <form>

        <div class="row">


          <!-- StartDate -->
          <div class="col col-md-6 col-lg-2 col-xxl-2">
            <div class="form-group">
              <label for="startDate">{{'::StartDate' | abpLocalization}}</label>
              <input type="date" id="startDate" class="form-control" [(ngModel)]="queryFilter.startDate"
                name="queryFilter.startDate" />
            </div>
          </div>

          <!-- EndDate -->
          <div class="col col-md-6 col-lg-2 col-xxl-2">
            <div class="form-group">
              <label for="endDate">{{'::EndDate' | abpLocalization}}</label>
              <input type="date" id="endDate" class="form-control" [(ngModel)]="queryFilter.endDate"
                name="queryFilter.endDate" />
            </div>
          </div>

          <!-- URL -->
          <div class="col col-md-6 col-lg-2 col-xxl-2">
            <div class="form-group">
              <label for="httpMethod">{{'::URL' | abpLocalization}}</label>
              <input type="text" id="url" class="form-control" [(ngModel)]="queryFilter.url" name="queryFilter.url" />
            </div>
          </div>

          <!-- UserName -->
          <div class="col col-md-6 col-lg-2 col-xxl-2">
            <div class="form-group">
              <label for="userName">{{'::UserName' | abpLocalization}}</label>
              <input type="text" id="userName" class="form-control" [(ngModel)]="queryFilter.userName"
                name="queryFilter.userName" />
            </div>
          </div>

          <!-- ApplicationName -->
          <div class="col col-md-6 col-lg-2 col-xxl-2">
            <div class="form-group">
              <label for="applicationName">{{'::ApplicationName' | abpLocalization}}</label>
              <input type="text" id="applicationName" class="form-control" [(ngModel)]="queryFilter.applicationName"
                name="queryFilter.applicationName" />
            </div>
          </div>

          <!-- MaxExecutionDuration && MinExecutionDuration -->
          <div class="col col-md-6 col-lg-2 col-xxl-2">
            <label for="maxExecutionDuration">{{'::Duration-Min-Max' | abpLocalization}}</label>
            <div class="input-group">
              <input type="number" id="maxExecutionDuration" class="form-control" [(ngModel)]="queryFilter.maxExecutionDuration" name="queryFilter.maxExecutionDuration" />
              <span class="input-group-text px-1">-</span>
              <input type="number" id="minExecutionDuration" class="form-control" [(ngModel)]="queryFilter.minExecutionDuration" name="queryFilter.minExecutionDuration" />
            </div>
          </div>

          <!-- HttpMethod -->
          <div class="col col-md-6 col-lg-2 col-xxl-2">
            <div class="form-group">
              <label for="httpMethod">{{'::HttpMethod' | abpLocalization}}</label>
              <input type="text" id="httpMethod" class="form-control" [(ngModel)]="queryFilter.httpMethod"
                name="queryFilter.httpMethod" />
            </div>
          </div>

          <!-- httpStatusCode -->
          <div class="col col-md-6 col-lg-2 col-xxl-2">
            <div class="form-group">
              <label for="httpStatusCode">{{'::HttpStatusCode' | abpLocalization}}</label>
              <input type="text" id="httpStatusCode" class="form-control" [(ngModel)]="queryFilter.httpStatusCode"
                name="queryFilter.httpStatusCode" />
            </div>
          </div>

          <!-- Client IP Address -->
          <div class="col col-md-6 col-lg-2 col-xxl-2">
            <div class="form-group">
              <label for="clientIpAddress">{{'::ClientIpAddress' | abpLocalization}}</label>
              <input type="text" id="clientIpAddress" class="form-control" [(ngModel)]="queryFilter.clientIpAddress"
                name="queryFilter.clientIpAddress" />
            </div>
          </div>

          <!-- Correlation Id -->
          <div class="col col-md-6 col-lg-2 col-xxl-2">
            <div class="form-group">
              <label for="correlationId">{{'::CorrelationId' | abpLocalization}}</label>
              <input type="text" id="clientIpAddress" class="form-control" [(ngModel)]="queryFilter.correlationId"
                name="queryFilter.correlationId" />
            </div>
          </div>

          <!-- HasException -->
          <div class="col col-md-6 col-lg-2 col-xxl-2">
            
          </div>

          <!-- button Refresh  -->
          <div class="col col-md-6 col-lg-2 col-xxl-2">
            <div class="mt-3 mb-lg-0 d-grid ">
              <button type="button" class="btn btn-primary" (click)="Refresh()">
                <span class=""> {{'::Refresh' | abpLocalization}} </span>
              </button>
            </div>
          </div>
        </div>

      </form>
    </div>




  </div>
</div>
<!-- Page List CARD -->
<div class="card">

  <!-- BODY -->
  <div class="card-body">

    <!-- TABLES -->
    <ngx-datatable [rows]="auditLogs.items" [count]="auditLogs.totalCount" [list]="list" [rowHeight]="50" (page)="onPage($event)" default>

      <ngx-datatable-column [name]="'::Actions' | abpLocalization" [sortable]="false">
        <ng-template let-row="row" ngx-datatable-cell-template>

          <button type="button" class="btn btn-primary text-center ng-star-inserted" (click)="Detail(row.id)">
            <i class="me-1 fa fa-eye ng-star-inserted"></i>
            <span class="ng-star-inserted">{{'::Details' | abpLocalization}}</span>
          </button>
        </ng-template>

      </ngx-datatable-column>

      <!-- HTTP-Request  -->
      <ngx-datatable-column [name]="'::HTTPRequest' | abpLocalization" prop="httpMethod" [sortable]="false">
        <ng-template let-row="row" ngx-datatable-cell-template>

          <p [ngSwitch]="row.httpStatusCode">
            <span class="badge bg-success me-1" *ngSwitchCase="200">{{row.httpMethod}}-{{row.httpStatusCode}}</span>
            <span class="badge bg-warning me-1" *ngSwitchCase="302">{{row.httpMethod}}-{{row.httpStatusCode}}</span>
            <span class="badge bg-danger me-1" *ngSwitchCase="500">{{row.httpMethod}}-{{row.httpStatusCode}}</span>
            <span class="badge bg-primary me-1" *ngSwitchDefault>{{row.httpMethod}}-{{row.httpStatusCode}}</span>
          </p>
        </ng-template>

      </ngx-datatable-column>

      <!-- URL -->
      <ngx-datatable-column [name]="'::URL' | abpLocalization" prop="url">

        <ng-template let-row="row" ngx-datatable-cell-template>
          <p class="">{{row.url}}</p>
        </ng-template>

      </ngx-datatable-column>

      <!-- HTTP-User -->
      <ngx-datatable-column [name]="'::UserName' | abpLocalization" prop="userName">
        <ng-template let-row="row" ngx-datatable-cell-template>
          <p class="">{{row.userName}}</p>
        </ng-template>
      </ngx-datatable-column>

      <!-- HTTP-Address  -->
      <ngx-datatable-column [name]="'::IPAddress' | abpLocalization" [sortable]="false">
        <ng-template let-row="row" ngx-datatable-cell-template>
          <p class="">{{row.clientIpAddress}}-{{clientName}}</p>
        </ng-template>
      </ngx-datatable-column>

      <!-- DATE  -->
      <ngx-datatable-column [name]="'::Date' | abpLocalization">
        <ng-template let-row="row" ngx-datatable-cell-template>
          <p class="">{{row.executionTime}}</p>
        </ng-template>
      </ngx-datatable-column>

      <!-- Duration  -->
      <ngx-datatable-column [name]="'::Duration' | abpLocalization" [sortable]="false">
        <ng-template let-row="row" ngx-datatable-cell-template>
          <p class="">{{row.executionDuration}}</p>
        </ng-template>
      </ngx-datatable-column>

      <!-- ApplicationName  -->
      <ngx-datatable-column [name]="'::ApplicationName' | abpLocalization" [sortable]="false">
        <ng-template let-row="row" ngx-datatable-cell-template>
          <p class="">{{row.applicationName}}</p>
        </ng-template>
      </ngx-datatable-column>

    </ngx-datatable>

  </div>
</div>



<abp-modal [(visible)]="isModalOpen">
  <!-- HEADER -->
  <ng-template #abpHeader>
    <h3>{{'::AuditLog' | abpLocalization}} </h3>
  </ng-template>
  <!-- BODY -->
  <ng-template #abpBody>

    <!-- content -->
    <table class="table table-striped ">
      <thead class="">
        <tr class="">
          <th class="px-4">{{'::PropertyName' | abpLocalization}}</th>
          <th class="">{{'::Value' | abpLocalization}}</th>
        </tr>
      </thead>
      <tbody class="">

        <tr class="">
          <td class="">{{'::ApplicationName' | abpLocalization}} </td>
          <td class="">{{auditLog.applicationName}} : </td>
        </tr>

        <tr class="">
          <td class="">{{'::UserName' | abpLocalization}}</td>
          <td class="">{{auditLog.userName}}</td>
        </tr>

        <tr class="">
          <td class="">{{'::TenantName' | abpLocalization}}</td>
          <td class="">{{auditLog.tenantName}}</td>
        </tr>


        <tr class="">
          <td class="">{{'::ImpersonatorUserName' | abpLocalization}} </td>
          <td class="">{{auditLog.impersonatorUserName}}</td>
        </tr>


        <tr class="">
          <td class="">{{'::ImpersonatorTenantName' | abpLocalization}}</td>
          <td class="">{{auditLog.impersonatorTenantName}}</td>
        </tr>


        <tr class="">
          <td class="">{{'::ExecutionTime' | abpLocalization}}</td>
          <td class="">{{auditLog.executionTime}}</td>
        </tr>


        <tr class="">
          <td class="">{{'::ExecutionDuration' | abpLocalization}}</td>
          <td class="">{{auditLog.executionDuration}}</td>
        </tr>


        <tr class="">
          <td class="">{{'::ClientIpAddress' | abpLocalization}}</td>
          <td class="">{{auditLog.clientIpAddress}}</td>
        </tr>

        <tr class="">
          <td class="">{{'::ClientName' | abpLocalization}}</td>
          <td class="">{{auditLog.clientName}}</td>
        </tr>

        <tr class="">
          <td class="">{{'::BrowserInfo' | abpLocalization}}</td>
          <td class="">{{auditLog.browserInfo}}</td>
        </tr>

        <tr class="">
          <td class="">{{'::HttpMethod' | abpLocalization}}</td>
          <td class="">
            <span class="badge bg-info me-1">{{auditLog.httpMethod}}</span>
          </td>
        </tr>

        <tr class="">
          <td class="">{{'::HttpStatusCode' | abpLocalization}}</td>
          <td class="" [ngSwitch]="auditLog.httpStatusCode">
            <span class="badge bg-success me-1" *ngSwitchCase="200">{{auditLog.httpStatusCode}}</span>
            <span class="badge bg-warning me-1" *ngSwitchCase="302">{{auditLog.httpStatusCode}}</span>
            <span class="badge bg-danger me-1" *ngSwitchCase="500">{{auditLog.httpStatusCode}}</span>
            <span class="badge bg-primary me-1" *ngSwitchDefault>{{auditLog.httpStatusCode}}</span>

          </td>
        </tr>

        <tr class="">
          <td class="">{{'::URL' | abpLocalization}}</td>
          <td class="">{{auditLog.url}}</td>
        </tr>

        <tr class="">
          <td class="">{{'::Comments' | abpLocalization}}</td>
          <td class="">{{auditLog.comments}}</td>
        </tr>

        <tr class="">
          <td class="">{{'::Exceptions' | abpLocalization}}</td>
          <td class="">{{auditLog.exceptions}}</td>
        </tr>

      </tbody>
    </table>

  </ng-template>

  <!-- FOOTER -->
  <ng-template #abpFooter>
    <button type="button" class="btn btn-secondary" abpClose>
      {{ '::Close' | abpLocalization }}
    </button>


  </ng-template>


</abp-modal>
